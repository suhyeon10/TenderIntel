# Supabase í”„ë¡œì íŠ¸ ì •ë³´

## ğŸ”— í”„ë¡œì íŠ¸ ì—°ê²° ì •ë³´

### í”„ë¡œì íŠ¸ ê¸°ë³¸ ì •ë³´
- **í”„ë¡œì íŠ¸ ID**: `zmxxbdrfwhavwxizdfyz`
- **í”„ë¡œì íŠ¸ URL**: `https://zmxxbdrfwhavwxizdfyz.supabase.co`
- **í”„ë¡œì íŠ¸ ì´ë¦„**: linkers-public

### API í‚¤
- **Anon Key**: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpteHhiZHJmd2hhdnd4aXpkZnl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg2ODQxMzcsImV4cCI6MjA3NDI2MDEzN30.lmIGh9Ysak38gGxvw2ZFbCluiVDMY_OSNQmZJOiZ1KY`

### MCP ì—°ê²°
- **MCP ì„œë²„**: `supabase-sessac`
- **MCP URL**: `https://mcp.supabase.com/mcp?project_ref=zmxxbdrfwhavwxizdfyz`
- **ì—°ê²° ìƒíƒœ**: âœ… ì •ìƒ ì—°ê²°ë¨

## ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ í˜„í™©

### í…Œì´ë¸” ê°œìˆ˜
ì´ **35ê°œ ì´ìƒ**ì˜ í…Œì´ë¸”ì´ ì¡´ì¬í•©ë‹ˆë‹¤.

### ì£¼ìš” í…Œì´ë¸” ëª©ë¡

#### 1. í”„ë¡œí•„ ê´€ë ¨ í…Œì´ë¸”
- `accounts` (11ê°œ í–‰) - ì‚¬ìš©ì í”„ë¡œí•„ (í”„ë¦¬ëœì„œ/ê¸°ì—…)
- `account_educations` (6ê°œ í–‰) - í•™ë ¥ ì •ë³´
- `account_work_experiences` (7ê°œ í–‰) - ê²½ë ¥ ì •ë³´
- `account_license` (8ê°œ í–‰) - ìê²©ì¦ ì •ë³´
- `account_portfolios` (2ê°œ í–‰) - í¬íŠ¸í´ë¦¬ì˜¤

#### 2. í”„ë¡œì íŠ¸ ìƒë‹´ ê´€ë ¨ í…Œì´ë¸”
- `counsel` (12ê°œ í–‰) - í”„ë¡œì íŠ¸ ìƒë‹´ ìš”ì²­
- `counsel_status_events` - ìƒë‹´ ìƒíƒœ ì´ë²¤íŠ¸ ë¡œê·¸
- `estimate` - ê²¬ì ì„œ
- `estimate_version` - ê²¬ì ì„œ ë²„ì „
- `estimate_views` (1ê°œ í–‰) - ê²¬ì ì„œ ì—´ëŒ ê¸°ë¡
- `estimate_access` (1ê°œ í–‰) - ê²¬ì ì„œ ì ‘ê·¼ ê¶Œí•œ

#### 3. íŒ€ ê´€ë ¨ í…Œì´ë¸”
- `teams` (3ê°œ í–‰) - íŒ€ ì •ë³´
- `team_members` (3ê°œ í–‰) - íŒ€ ë©¤ë²„
- `team_proposals` - íŒ€ ì œì•ˆ
- `team_counsel` - íŒ€ë³„ ìƒë‹´ ì—°ê²°
- `team_project` - íŒ€ í”„ë¡œì íŠ¸

#### 4. í”„ë¡œì íŠ¸ ë©¤ë²„ ê´€ë ¨ í…Œì´ë¸”
- `project_members` (7ê°œ í–‰) - í”„ë¡œì íŠ¸ ë©¤ë²„
- `career_verification_requests` (4ê°œ í–‰) - ê²½ë ¥ ì¸ì¦ ìš”ì²­

#### 5. ê²°ì œ ê´€ë ¨ í…Œì´ë¸”
- `subscriptions` (1ê°œ í–‰) - êµ¬ë… ì •ë³´
- `payments` - ê²°ì œ ë‚´ì—­
- `pricing` (2ê°œ í–‰) - ê°€ê²©í‘œ
- `free_quota` (3ê°œ í–‰) - ë¬´ë£Œ ì—´ëŒ í• ë‹¹ëŸ‰
- `payment_retry_queue` - ê²°ì œ ì¬ì‹œë„ í

#### 6. ì±„íŒ… ê´€ë ¨ í…Œì´ë¸”
- `chat` - ì±„íŒ…ë°©
- `chat_message` - ì±„íŒ… ë©”ì‹œì§€

#### 7. ê¸°ì—… ê´€ë ¨ í…Œì´ë¸”
- `client` (1ê°œ í–‰) - ê¸°ì—… í´ë¼ì´ì–¸íŠ¸ ì •ë³´
- `company_bookmarks` - ê¸°ì—… ë¶ë§ˆí¬
- `company_team_members` (1ê°œ í–‰) - ê¸°ì—… íŒ€ ë©¤ë²„

#### 8. ë§ˆì¼ìŠ¤í†¤ ë° ì§€ê¸‰ í…Œì´ë¸”
- `milestone` - ë§ˆì¼ìŠ¤í†¤
- `payment` - ì§€ê¸‰ ë‚´ì—­

#### 9. ì•Œë¦¼ ë° ê¸°íƒ€ í…Œì´ë¸”
- `notifications` - ì•Œë¦¼
- `manager_bookmarks` (2ê°œ í–‰) - ë§¤ë‹ˆì € ë¶ë§ˆí¬
- `project_bookmarks` (3ê°œ í–‰) - í”„ë¡œì íŠ¸ ë¶ë§ˆí¬
- `user_settings` (2ê°œ í–‰) - ì‚¬ìš©ì ì„¤ì •
- `magazine` - ì¡ì§€
- `maker_estimates` - ë©”ì´ì»¤ ê²¬ì 

## ğŸ”„ ë§ˆì´ê·¸ë ˆì´ì…˜ í˜„í™©

### ì´ ë§ˆì´ê·¸ë ˆì´ì…˜ ìˆ˜
**45ê°œì˜ ë§ˆì´ê·¸ë ˆì´ì…˜**ì´ ì ìš©ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

### ìµœê·¼ ë§ˆì´ê·¸ë ˆì´ì…˜ (ì¼ë¶€)
1. `enable_multiple_profiles_per_user` - ë‹¤ì¤‘ í”„ë¡œí•„ ì§€ì›
2. `change_primary_key_to_profile_id` - ê¸°ë³¸ í‚¤ ë³€ê²½
3. `create_subscriptions_and_payments_tables` - êµ¬ë…/ê²°ì œ í…Œì´ë¸” ìƒì„±
4. `payment_model_v2_schema_fixed` - ê²°ì œ ëª¨ë¸ V2 ìŠ¤í‚¤ë§ˆ
5. `payment_retry_queue` - ê²°ì œ ì¬ì‹œë„ í
6. `improve_dual_profiles_design` - ì´ì¤‘ í”„ë¡œí•„ ì„¤ê³„ ê°œì„ 

## ğŸ“ ìƒì„±ëœ ìŠ¤í‚¤ë§ˆ íŒŒì¼

### ì´ˆê¸° ìŠ¤í‚¤ë§ˆ íŒŒì¼
- **íŒŒì¼ëª…**: `database_initial_schema.sql`
- **ìœ„ì¹˜**: í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬
- **ë‚´ìš©**: ëª¨ë“  ê¸°ë³¸ í…Œì´ë¸” ìƒì„± SQL

### ì£¼ìš” í¬í•¨ ë‚´ìš©
1. ENUM íƒ€ì… ì •ì˜ (profile_type, user_role, counsel_status ë“±)
2. í”„ë¡œí•„ ê´€ë ¨ í…Œì´ë¸” (accounts, client, account_educations ë“±)
3. í”„ë¡œì íŠ¸ ìƒë‹´ í…Œì´ë¸” (counsel, estimate ë“±)
4. íŒ€ ê´€ë ¨ í…Œì´ë¸” (teams, team_members ë“±)
5. ê²°ì œ ê´€ë ¨ í…Œì´ë¸” (subscriptions, payments ë“±)
6. ì±„íŒ… í…Œì´ë¸” (chat, chat_message)
7. íŠ¸ë¦¬ê±° í•¨ìˆ˜ ë° ì¸ë±ìŠ¤

## âš ï¸ ë³´ì•ˆ ìƒíƒœ

### RLS (Row Level Security) ìƒíƒœ
- âœ… RLS í™œì„±í™”ëœ í…Œì´ë¸”: `accounts`, `subscriptions`, `payments`, `team_proposals` ë“±
- âŒ RLS ë¹„í™œì„±í™”ëœ í…Œì´ë¸”: `counsel`, `teams`, `client`, `estimate`, `chat` ë“±

### ë³´ì•ˆ ê¶Œê³ ì‚¬í•­
1. **RLS í™œì„±í™” í•„ìš”**: ì£¼ìš” í…Œì´ë¸”ì— RLSë¥¼ í™œì„±í™”í•´ì•¼ í•©ë‹ˆë‹¤
2. **RLS ì •ì±… ì¶”ê°€**: ê° í…Œì´ë¸”ì— ì ì ˆí•œ RLS ì •ì±…ì´ í•„ìš”í•©ë‹ˆë‹¤
3. **SECURITY DEFINER ë·° ê²€í† **: `team_with_members`, `maker_estimates_with_details` ë·° ê²€í†  í•„ìš”

## ğŸ”§ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

### í•„ìˆ˜ í™˜ê²½ ë³€ìˆ˜
```env
NEXT_PUBLIC_SUPABASE_URL=https://zmxxbdrfwhavwxizdfyz.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpteHhiZHJmd2hhdnd4aXpkZnl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg2ODQxMzcsImV4cCI6MjA3NDI2MDEzN30.lmIGh9Ysak38gGxvw2ZFbCluiVDMY_OSNQmZJOiZ1KY
NEXT_PUBLIC_STORAGE_BUCKET=attach_file
```

## ğŸ“š ê´€ë ¨ ë¬¸ì„œ

- `database_initial_schema.sql` - ì´ˆê¸° ìŠ¤í‚¤ë§ˆ ìƒì„± íŒŒì¼
- `MCP_CONNECTION_CHECK.md` - MCP ì—°ê²° í™•ì¸ ê°€ì´ë“œ
- `DB_VERIFICATION.md` - ë°ì´í„°ë² ì´ìŠ¤ í™•ì¸ ê²°ê³¼

## ğŸ”— ìœ ìš©í•œ ë§í¬

- [Supabase ëŒ€ì‹œë³´ë“œ](https://app.supabase.com/project/zmxxbdrfwhavwxizdfyz)
- [SQL Editor](https://app.supabase.com/project/zmxxbdrfwhavwxizdfyz/sql)
- [Table Editor](https://app.supabase.com/project/zmxxbdrfwhavwxizdfyz/editor)

